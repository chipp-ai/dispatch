# =============================================================================
# Chipp Deno Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values.
# Get credentials from 1Password or ask a team member.
#
# Required for basic local development:
#   - DATABASE_URL, REDIS_URL (infrastructure)
#   - OPENROUTER_API_KEY (AI features)
#   - STRIPE_SANDBOX_KEY (billing)
#
# Everything else can be added as needed for specific features.
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
# ENVIRONMENT: development | staging | production
# Controls logging verbosity, error reporting, and feature flags
ENVIRONMENT=development

# PORT: The port the Deno API server listens on
# Default: 8000 (Svelte SPA runs on 5174)
PORT=8000

# APP_URL: Base URL for the API server
# Used for OAuth callbacks, webhooks, and generating links
APP_URL=http://localhost:8000

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
# Single PostgreSQL database with 4 schemas: app, chat, rag, billing
#
# Local development: Run `docker compose up -d` to start PostgreSQL on port 5433
# Format: postgresql://user:password@host:port/database
#
# Schemas:
#   - app.*     : Core application data (users, apps, organizations)
#   - chat.*    : Conversation history and messages
#   - rag.*     : RAG embeddings and vector search
#   - billing.* : Stripe billing, subscriptions, usage
DATABASE_URL=postgresql://postgres:supersecret@localhost:5433/chipp

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
# Used for caching, rate limiting, and pub/sub
# Local: Run `docker compose up -d` or install Redis locally
REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# OAuth Providers
# -----------------------------------------------------------------------------
# Google OAuth - for "Sign in with Google"
# Create credentials at: https://console.cloud.google.com/apis/credentials
# Authorized redirect URI: http://localhost:8000/api/oauth/google/callback
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Microsoft/Azure AD OAuth - for "Sign in with Microsoft"
# Create app at: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps
# MICROSOFT_TENANT_ID: Use "common" for multi-tenant, or specific tenant ID
MICROSOFT_TENANT_ID=common
MICROSOFT_CLIENT_ID=
MICROSOFT_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Stripe Configuration
# -----------------------------------------------------------------------------
# Stripe powers all billing: subscriptions, usage-based billing, invoices
#
# STRIPE_SECRET_KEY: Your Stripe secret key (sk_test_* for sandbox, sk_live_* for prod)
#
# For local webhook testing, use Stripe CLI:
#   stripe listen --forward-to localhost:8000/api/webhooks/stripe
STRIPE_SECRET_KEY=

# Stripe Webhook Secrets
# The webhook endpoint is /api/webhooks/stripe
# Configure these in your Stripe Dashboard under Developers > Webhooks
#
# STRIPE_WEBHOOK_SECRET_LIVE: Live mode webhook secret (for production and STRIPE_USE_LIVE_MODE=true)
# STRIPE_WEBHOOK_SECRET_TEST: Test mode webhook secret (for development with sandbox)
#
# To use test mode webhooks, add ?testMode=true to the webhook URL:
#   https://your-domain.com/api/webhooks/stripe?testMode=true
STRIPE_WEBHOOK_SECRET_LIVE=whsec_...
STRIPE_WEBHOOK_SECRET_TEST=whsec_...

# Legacy webhook secret (deprecated - use STRIPE_WEBHOOK_SECRET_LIVE/TEST instead)
STRIPE_WEBHOOK_SECRET=

# Stripe Token Billing (Usage-Based LLM Billing)
# These enable routing LLM requests through Stripe's metered billing proxy
# for automatic per-token cost attribution to customers.
#
# STRIPE_CHIPP_KEY: Production Stripe key for live billing
# STRIPE_SANDBOX_KEY: Sandbox key for testing (use this locally)
# STRIPE_CHIPP_INTERNAL_CUSTOMER_ID: Customer ID for Chipp-fronted costs (prod)
# STRIPE_CHIPP_INTERNAL_SANDBOX_CUSTOMER_ID: Same but for sandbox
# USE_STRIPE_SANDBOX: Set to "true" for local dev to avoid live charges
STRIPE_CHIPP_KEY=
STRIPE_SANDBOX_KEY=
STRIPE_CHIPP_INTERNAL_CUSTOMER_ID=
STRIPE_CHIPP_INTERNAL_SANDBOX_CUSTOMER_ID=
USE_STRIPE_SANDBOX=true

# -----------------------------------------------------------------------------
# Sentry (Error Tracking)
# -----------------------------------------------------------------------------
# Optional for local dev, but recommended for staging/production
# Create project at: https://sentry.io
#
# SENTRY_DSN: Data Source Name from Sentry project settings
# SENTRY_ENVIRONMENT: Appears in Sentry to filter by environment
# VERSION: Git SHA or version tag, shown in Sentry releases
SENTRY_DSN=
SENTRY_ENVIRONMENT=local
VERSION=development

# -----------------------------------------------------------------------------
# AI Providers
# -----------------------------------------------------------------------------
# At minimum, you need OPENROUTER_API_KEY for AI features.
# Other providers are optional and used for specific model access.

# OpenRouter (REQUIRED) - Unified API for multiple LLM providers
# Get key at: https://openrouter.ai/keys
# This is the primary provider for all AI features
OPENROUTER_API_KEY=

# OpenAI - Direct access for GPT models and embeddings
# Get key at: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# Anthropic - Direct access for Claude models
# Get key at: https://console.anthropic.com/
ANTHROPIC_API_KEY=

# Google AI - For Gemini models and document extraction
# Get key at: https://aistudio.google.com/apikey
GOOGLE_GENERATIVE_AI_API_KEY=

# -----------------------------------------------------------------------------
# Cloudflare R2 (Object Storage)
# -----------------------------------------------------------------------------
# Used for brand asset sync (logos, favicons) between admin and chat widget
#
# Create R2 bucket and API token at:
#   https://dash.cloudflare.com/<account_id>/r2/overview
#
# Token permissions needed: Object Read & Write
# Use chipp-deno-spa-dev bucket for local dev to avoid overwriting production
R2_ENDPOINT=https://<account_id>.r2.cloudflarestorage.com
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_BUCKET_NAME=chipp-deno-spa-dev
R2_PUBLIC_URL=https://r2.chipp.ai

# -----------------------------------------------------------------------------
# Google Cloud Platform
# -----------------------------------------------------------------------------
# Used for file storage (GCS buckets) and video generation (Veo)
#
# GOOGLE_SERVICE_KEY_BASE_64: Base64-encoded service account JSON
#   Generate at: https://console.cloud.google.com/iam-admin/serviceaccounts
#   Required roles: Storage Object Admin, Vertex AI User
#
# GOOGLE_PROJECT_ID: Your GCP project ID
# GCS_FILE_BUCKET: Bucket for user-uploaded files
# GCS_IMAGE_BUCKET: Bucket for generated/processed images
GOOGLE_SERVICE_KEY_BASE_64=
GOOGLE_PROJECT_ID=chippai-398019
GCS_FILE_BUCKET=chipp-application-files
GCS_IMAGE_BUCKET=chipp-images

# -----------------------------------------------------------------------------
# Cloudflare (DNS & Edge)
# -----------------------------------------------------------------------------
# Used for custom domain management and edge configuration
#
# Get these from: https://dash.cloudflare.com/<account_id>/overview
CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_ZONE_ID=
CLOUDFLARE_API_TOKEN=

# -----------------------------------------------------------------------------
# LiveKit (Voice Agents)
# -----------------------------------------------------------------------------
# Powers real-time voice conversations with AI agents
#
# Get credentials from: https://cloud.livekit.io/
# LIVEKIT_URL: WebSocket URL for your LiveKit project
# LIVEKIT_API_KEY/SECRET: For generating room tokens
LIVEKIT_URL=
LIVEKIT_API_KEY=
LIVEKIT_API_SECRET=

# -----------------------------------------------------------------------------
# Twilio (Voice & SMS) - Optional
# -----------------------------------------------------------------------------
# For phone number provisioning and WhatsApp integration
# Get credentials at: https://console.twilio.com/
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=

# -----------------------------------------------------------------------------
# Firecrawl (Web Scraping)
# -----------------------------------------------------------------------------
# Used for crawling websites to build knowledge bases
# Get key at: https://firecrawl.dev/
FIRECRAWL_API_KEY=

# -----------------------------------------------------------------------------
# fal.ai (Video Generation)
# -----------------------------------------------------------------------------
# For AI video generation (Kling, etc.)
# Get key at: https://fal.ai/dashboard/keys
FAL_KEY=

# -----------------------------------------------------------------------------
# Email Services
# -----------------------------------------------------------------------------
# SMTP2GO (Consumer transactional emails: OTP, magic link, password reset)
# Used by transactional-email.service.ts for consumer auth flows
# Sign up at: https://www.smtp2go.com/
SMTP_HOST=mail.smtp2go.com
SMTP_PORT=465
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@chipp.ai
SMTP_FROM_NAME=Chipp

# Postmark (Primary) - Transactional emails
# Get credentials at: https://postmarkapp.com/
POSTMARK_SHARED_SERVER_TOKEN=
POSTMARK_SHARED_DOMAIN=agents.chipp.ai

# SendGrid (REMOVED) - Replaced by SMTP2GO for transactional emails

# -----------------------------------------------------------------------------
# Linear (Issue Tracking)
# -----------------------------------------------------------------------------
# For automated issue creation from Sentry errors
# Get API key at: https://linear.app/settings/api
LINEAR_API_KEY=
