# Dispatch Configuration

# =============================================================================
# REQUIRED
# =============================================================================

# Database (PostgreSQL with pgvector extension)
PG_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/dispatch

# OpenAI for embeddings (used for similar issue search)
OPENAI_API_KEY=sk-...

# =============================================================================
# AUTHENTICATION
# =============================================================================

# Simple password auth for web UI (required in production)
DISPATCH_PASSWORD=your-secure-password-here

# API key for MCP server and CI/CD authentication (required in production)
DISPATCH_API_KEY=your-api-key-here

# =============================================================================
# BRANDING (all optional, shown defaults)
# =============================================================================

# Display name shown in UI, terminal, OG images
# NEXT_PUBLIC_APP_NAME=Dispatch

# Subtitle/tagline
# NEXT_PUBLIC_APP_DESCRIPTION=Autonomous Agent Orchestration Platform

# Base URL for portal links and OG images
NEXT_PUBLIC_APP_URL=https://your-dispatch-instance.com

# Default issue prefix for new workspaces (e.g. DISPATCH-123)
# DEFAULT_ISSUE_PREFIX=DISPATCH

# Default workspace name
# DEFAULT_WORKSPACE_NAME=My Workspace

# Override terminal braille art (alternative to npm run generate-logo)
# NEXT_PUBLIC_BRAND_BRAILLE=

# =============================================================================
# GITHUB INTEGRATION
# =============================================================================

# GitHub repository (format: owner/repo) -- your target codebase
GITHUB_REPO=your-org/your-repo

# GitHub personal access token (needs 'repo' and 'actions' permissions)
GITHUB_TOKEN=ghp_...

# GitHub webhook secret (generate with: openssl rand -hex 32)
# Configure in GitHub: Settings > Webhooks > Add webhook
# Webhook URL: https://your-dispatch-instance.com/api/github/webhook
# Events: Pull requests
GITHUB_WEBHOOK_SECRET=

# Optional: override owner/repo separately
# GITHUB_REPO_OWNER=your-org
# GITHUB_REPO_NAME=your-repo

# GitHub repo for the UI link to workflow runs
# NEXT_PUBLIC_GITHUB_REPO=your-org/your-repo

# =============================================================================
# AGENT ORCHESTRATION
# =============================================================================

# Anthropic API key for the orchestrator terminal and Claude Code agents
ANTHROPIC_API_KEY=sk-ant-...

# Orchestrator model (default: claude-sonnet-4-5-20250929)
# ORCHESTRATOR_MODEL=claude-sonnet-4-5-20250929

# Display model label in terminal header
# NEXT_PUBLIC_ORCHESTRATOR_MODEL=opus-4.6

# Max tokens per response (default: 4096)
# ORCHESTRATOR_MAX_TOKENS=4096

# Max tool execution rounds per user turn (default: 10)
# ORCHESTRATOR_MAX_TOOL_ROUNDS=10

# =============================================================================
# SPAWN CONTROLS
# =============================================================================

# Max concurrent agent runs per type
# MAX_CONCURRENT_SPAWNS_ERROR=100
# MAX_CONCURRENT_SPAWNS_PRD=100

# Daily spawn budget per type
# DAILY_SPAWN_BUDGET_ERROR=1000
# DAILY_SPAWN_BUDGET_PRD=1000

# Cooldown between spawns for same error fingerprint (hours)
# SPAWN_COOLDOWN_HOURS=24

# Minimum events before auto-spawning for an error
# MIN_EVENT_COUNT_TO_SPAWN=1

# Delay before spawning (minutes)
# SPAWN_DELAY_MINUTES=1

# =============================================================================
# NOTIFICATIONS
# =============================================================================

# Set to 'false' to disable all Slack notifications
# NOTIFICATIONS_ENABLED=true

# Slack bot token for sending notifications to customer channels
# SLACK_BOT_TOKEN=xoxb-...

# =============================================================================
# OPTIONAL INTEGRATIONS
# =============================================================================

# Gemini API for intelligent PR-to-issue matching
# GOOGLE_AI_API_KEY=

# Linear API key for importing issues
# LINEAR_API_KEY=lin_api_...
# LINEAR_WEBHOOK_SECRET=
# LINEAR_TEAM_ID=

# Sentry integration for error tracking
# SENTRY_CLIENT_SECRET=
# SENTRY_API_TOKEN=
# SENTRY_ORGANIZATION_SLUG=

# Dispatch callback URL (for local dev tunnels)
# DISPATCH_CALLBACK_URL=https://your-ngrok-url.ngrok.io

# =============================================================================
# PRODUCTION
# =============================================================================

PORT=3002
NODE_ENV=production
