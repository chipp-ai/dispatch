# Chipp Issues Configuration

# =============================================================================
# REQUIRED
# =============================================================================

# Database (dedicated 'dispatch' database on the same Postgres instance)
PG_DATABASE_URL=postgresql://postgres:password@localhost:5432/dispatch

# OpenAI for embeddings (used for similar issue search)
OPENAI_API_KEY=sk-...

# =============================================================================
# AUTHENTICATION
# =============================================================================

# Simple password auth for web UI (required in production)
CHIPP_ISSUES_PASSWORD=your-secure-password-here

# API key for MCP server authentication (required in production)
CHIPP_ISSUES_API_KEY=your-api-key-here

# =============================================================================
# GITHUB INTEGRATION (for PR reconciliation)
# =============================================================================

# GitHub repository (format: owner/repo)
GITHUB_REPO=BenchmarkAI/chipp-monorepo

# GitHub webhook secret (generate with: openssl rand -hex 32)
# Configure this in GitHub: Settings > Webhooks > Add webhook
# Webhook URL: https://your-domain/api/github/webhook
# Events: Pull requests
GITHUB_WEBHOOK_SECRET=

# Gemini API for intelligent PR-to-issue matching
GOOGLE_AI_API_KEY=

# =============================================================================
# NOTIFICATIONS
# =============================================================================

# Set to 'false' to disable all Slack/email notifications (useful for testing)
# Default: true (notifications enabled)
NOTIFICATIONS_ENABLED=true

# Slack bot token for sending notifications to customer channels
SLACK_BOT_TOKEN=xoxb-...

# =============================================================================
# LINEAR INTEGRATION
# =============================================================================

# Linear API key for importing issues and webhook verification
# Get this from: Linear > Settings > API > Personal API keys
LINEAR_API_KEY=lin_api_...

# Linear webhook signing secret
# Get this from: Linear > Settings > API > Webhooks > Your webhook > Signing secret
LINEAR_WEBHOOK_SECRET=

# Linear team ID to import issues from (optional, defaults to 'Product')
LINEAR_TEAM_ID=

# =============================================================================
# OPTIONAL
# =============================================================================

# Default workspace ID (auto-created on first run if not set)
CHIPP_ISSUES_WORKSPACE_ID=

# Webhook secret for verifying external webhook calls
CHIPP_ISSUES_WEBHOOK_SECRET=

# =============================================================================
# SENTRY INTEGRATION
# =============================================================================

# Client secret from Sentry Internal Integration for webhook signature verification
# Get this from: Sentry > Settings > Developer Settings > Internal Integrations > Your Integration > Client Secret
SENTRY_CLIENT_SECRET=

# API token from Sentry Internal Integration for fetching full issue details (stack traces, etc.)
# Get this from: Sentry > Settings > Developer Settings > Internal Integrations > Your Integration > Tokens
SENTRY_API_TOKEN=

# Your Sentry organization slug
# Get this from your Sentry URL: https://[org-slug].sentry.io
SENTRY_ORGANIZATION_SLUG=

# =============================================================================
# GITHUB CORRELATION (Optional)
# =============================================================================

# GitHub personal access token for correlating errors with recent commits
# Create at: https://github.com/settings/tokens (needs 'repo' read access)
GITHUB_TOKEN=

# =============================================================================
# ORCHESTRATOR (AI Terminal)
# =============================================================================

# Anthropic API key for the orchestrator terminal
ANTHROPIC_API_KEY=sk-ant-...

# Model to use (default: claude-sonnet-4-5-20250929)
# ORCHESTRATOR_MODEL=claude-sonnet-4-5-20250929

# Max tokens per response (default: 4096)
# ORCHESTRATOR_MAX_TOKENS=4096

# Max tool execution rounds per user turn (default: 10)
# ORCHESTRATOR_MAX_TOOL_ROUNDS=10

# =============================================================================
# PRODUCTION ONLY
# =============================================================================

# Server configuration
PORT=3002
NODE_ENV=production

# For SSL termination at load balancer
# TRUST_PROXY=true
